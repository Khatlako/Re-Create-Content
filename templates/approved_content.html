<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Facebook OAuth Callback</title>
</head>
<body>
<h2>Facebook OAuth Callback</h2>
<p>If you see this page, the OAuth redirect worked. Processing...</p>

<script>
  // 1. Get the 'code' parameter from the URL
  const params = new URLSearchParams(window.location.search);
  const code = params.get('code');

  if(code){
    console.log("Facebook authorization code:", code);

    // 2. Send the code to your Make.com webhook
    const webhookUrl = "https://hook.eu2.make.com/j64u5rj9rtsuczkrllgydwvsyy8xay2h"; // <-- Replace this
    fetch(webhookUrl, {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ fb_code: code })
    })
    .then(response => {
      console.log("Webhook sent successfully:", response.status);
      document.body.innerHTML += "<p>Authorization code sent successfully!</p>";
    })
    .catch(error => {
      console.error("Error sending webhook:", error);
      document.body.innerHTML += "<p>Error sending webhook. Check console.</p>";
    });

  } else {
    console.log("No code found in URL.");
    document.body.innerHTML += "<p>No authorization code found in URL.</p>";
  }
</script>
</body>
</html>
